"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[526],{4526:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var o=r(5043),a=r(3216),d=r(579);const c=e=>{let{onProductAdded:t}=e;const[r,a]=(0,o.useState)({productid:"",productCategory:"",productType:"",productImage:null,productVolume:"",productPrice:"",productDescription:"",brandID:""}),[c,s]=(0,o.useState)(""),n=e=>{const{name:t,value:o}=e.target;a({...r,[t]:o})};return(0,d.jsxs)("div",{className:"add-product-form-sm69",children:[(0,d.jsx)("h2",{className:"add-product-form-header-sm69",children:"Add a New Product"}),(0,d.jsxs)("form",{className:"add-product-form-form-sm69",onSubmit:async e=>{e.preventDefault();const o=localStorage.getItem("authToken");if(!o)return void s("You are not authenticated. Please log in.");const d=new FormData;d.append("productid",r.productid),d.append("productCategory",r.productCategory),d.append("productType",r.productType),r.productImage&&d.append("productImage",r.productImage),d.append("productVolume",r.productVolume),d.append("productPrice",r.productPrice),d.append("productDescription",r.productDescription),d.append("brandID",r.brandID);try{const e=await fetch("https://prasad-gz5p.onrender.com/api/products/",{method:"POST",headers:{Authorization:`Token ${o}`},body:d});if(!e.ok)throw new Error("Failed to add product");const r=await e.json();t(r),a({productid:"",productCategory:"",productType:"",productImage:null,productVolume:"",productPrice:"",productDescription:"",brandID:""}),s("Product added successfully!")}catch(c){s(c.message)}},children:[(0,d.jsx)("input",{className:"add-product-form-input-sm69",type:"text",name:"productid",placeholder:"Product ID",value:r.productid,onChange:n,required:!0}),(0,d.jsx)("input",{className:"add-product-form-input-sm69",type:"text",name:"productCategory",placeholder:"Product Category",value:r.productCategory,onChange:n,required:!0}),(0,d.jsx)("input",{className:"add-product-form-input-sm69",type:"text",name:"productType",placeholder:"Product Type",value:r.productType,onChange:n}),(0,d.jsx)("input",{className:"add-product-form-file-input-sm69",type:"file",name:"productImage",accept:"image/*",onChange:e=>{a({...r,productImage:e.target.files[0]})},required:!0}),(0,d.jsx)("input",{className:"add-product-form-input-sm69",type:"text",name:"productVolume",placeholder:"Product Volume",value:r.productVolume,onChange:n,required:!0}),(0,d.jsx)("input",{className:"add-product-form-input-sm69",type:"number",name:"productPrice",placeholder:"Product Price",value:r.productPrice,onChange:n,required:!0}),(0,d.jsx)("textarea",{className:"add-product-form-textarea-sm69",name:"productDescription",placeholder:"Product Description",value:r.productDescription,onChange:n,required:!0}),(0,d.jsx)("input",{className:"add-product-form-input-sm69",type:"text",name:"brandID",placeholder:"Brand ID",value:r.brandID,onChange:n,required:!0}),(0,d.jsx)("button",{className:"add-product-form-button-sm69",type:"submit",children:"Add Product"})]}),c&&(0,d.jsx)("p",{className:"add-product-form-message-sm69",children:c})]})},s=e=>{let{onProductUpdated:t,currentProduct:r}=e;const[a,c]=(0,o.useState)({productid:"",productCategory:"",productType:"",productImage:"",productVolume:"",productPrice:"",productDescription:"",brandID:""}),[s,n]=(0,o.useState)(""),[u,p]=(0,o.useState)("");(0,o.useEffect)((()=>{r&&(c(r),n(r.productImage))}),[r]);const i=e=>{const{name:t,value:r}=e.target;c({...a,[t]:r})};return(0,d.jsxs)("div",{className:"update-product-formV009",children:[(0,d.jsx)("h2",{children:"Update Product"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=localStorage.getItem("authToken"),o=new FormData;if(o.append("productid",a.productid),o.append("productCategory",a.productCategory),o.append("productType",a.productType),o.append("productVolume",a.productVolume),o.append("productPrice",a.productPrice),o.append("productDescription",a.productDescription),o.append("brandID",a.brandID),a.productImage)o.append("productImage",a.productImage);else if(s){const e=await fetch(s),t=await e.blob(),r=new File([t],s.split("/").pop(),{type:"image/jpeg"});o.append("productImage",r)}try{const e=await fetch(`https://prasad-gz5p.onrender.com/api/products/${a.productid}/update/`,{method:"PUT",headers:{Authorization:`Token ${r}`},body:o});if(!e.ok)throw new Error("Failed to update product");const d=await e.json();t(d),p("Product updated successfully!")}catch(d){p(d.message)}},className:"update-product-form-elementV009",children:[(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"text",name:"productCategory",placeholder:"Product Category",value:a.productCategory,onChange:i,required:!0,className:"update-product-inputV009"}),(0,d.jsx)("input",{type:"text",name:"productType",placeholder:"Product Type",value:a.productType,onChange:i,className:"update-product-inputV009"})]}),(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"file",name:"productImage",accept:"image/*",onChange:e=>{c({...a,productImage:e.target.files[0]})},className:"update-product-file-inputV009"}),s&&(0,d.jsxs)("div",{className:"current-image-displayV009",children:[(0,d.jsx)("img",{src:s,alt:"Current Product"}),(0,d.jsxs)("div",{className:"current-image-checkboxV009",children:[(0,d.jsx)("input",{type:"checkbox",checked:!a.productImage,onChange:()=>c({...a,productImage:null})}),(0,d.jsx)("span",{children:"Use Current Image"})]})]})]}),(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"text",name:"productVolume",placeholder:"Product Volume",value:a.productVolume,onChange:i,required:!0,className:"update-product-inputV009"}),(0,d.jsx)("input",{type:"number",name:"productPrice",placeholder:"Product Price",value:a.productPrice,onChange:i,required:!0,className:"update-product-inputV009"})]}),(0,d.jsx)("textarea",{name:"productDescription",placeholder:"Product Description",value:a.productDescription,onChange:i,required:!0,className:"update-product-textareaV009"}),(0,d.jsx)("input",{type:"text",name:"brandID",placeholder:"Brand ID",value:a.brandID,onChange:i,required:!0,className:"update-product-inputV009"}),(0,d.jsx)("button",{type:"submit",className:"update-product-buttonV009",children:"Update Product"})]}),u&&(0,d.jsx)("div",{className:"update-product-messageV009",children:u})]})};var n=r(4594),u=r(3910),p=r(7929);const i=()=>{const{brandID:e}=(0,a.g)(),[t,r]=(0,o.useState)([]),[i,l]=(0,o.useState)(!0),[m,h]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1),[j,y]=(0,o.useState)(!1),[N,V]=(0,o.useState)(null),[f,v]=(0,o.useState)(""),[C,P]=(0,o.useState)(null),[b,I]=(0,o.useState)({top:0,left:0}),[w,D]=(0,o.useState)(""),k=(0,a.Zp)(),S=async()=>{l(!0),h(null);try{const t=await fetch("https://prasad-gz5p.onrender.com/api/products/");if(!t.ok)throw new Error("Network response was not ok");const o=(await t.json()).filter((t=>t.brandID===e));r(o)}catch(t){h(t.message)}finally{l(!1)}};(0,o.useEffect)((()=>{S()}),[e]);const T=()=>{S(),x(!1),y(!1),v("Product updated successfully!"),setTimeout((()=>v("")),3e3)},q=()=>{j&&y(!1),x(!g)},E=()=>{P(null)},L=e=>{const t=document.querySelector(".product-modal-contentV025");t&&!t.contains(e.target)&&E()},A=()=>{C&&E()};(0,o.useEffect)((()=>(document.addEventListener("mousedown",L),document.addEventListener("touchstart",L),window.addEventListener("scroll",A),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L),window.removeEventListener("scroll",A)})),[]);const z=t.filter((e=>e.productCategory&&e.productCategory.toLowerCase().includes(w.toLowerCase())||e.productType&&e.productType.toLowerCase().includes(w.toLowerCase())||e.productVolume&&e.productVolume.toString().includes(w)||e.productPrice&&e.productPrice.toString().includes(w)));return i?(0,d.jsx)("div",{className:"product-list-loadingV025",children:(0,d.jsx)(n.A,{})}):m?(0,d.jsxs)("div",{className:"product-list-errorV025",children:["Error: ",m]}):(0,d.jsxs)("div",{className:"product-list-containerV025",children:[f&&(0,d.jsx)("div",{className:"notification-containerV025",onClick:()=>v(""),children:f}),(0,d.jsxs)("div",{className:"main-containerV025",children:[(0,d.jsxs)("div",{className:"title-containerV025",children:[(0,d.jsx)("button",{className:"back-buttonV025",onClick:()=>{k("/brands")},children:(0,d.jsx)(u.g,{icon:p.CeG,size:"2x"})}),(0,d.jsxs)("h1",{className:"product-list-titleV025",children:["Product List for Brand ",e]})]}),(0,d.jsx)("button",{className:"product-list-add-buttonV025",onClick:q,children:g?"Close":"Add Product"}),(0,d.jsx)("input",{type:"text",placeholder:"Search...",value:w,onChange:e=>D(e.target.value),className:"search-barV025"}),g&&(0,d.jsx)("dialog",{className:"product-list-modalV025",open:!0,children:(0,d.jsxs)("div",{className:"product-list-modal-contentV025",children:[(0,d.jsx)("span",{className:"product-list-closeV025",onClick:q,children:"\xd7"}),(0,d.jsx)(c,{onProductAdded:T})]})}),j&&(0,d.jsx)("dialog",{className:"product-list-modalV025",open:!0,children:(0,d.jsxs)("div",{className:"product-list-modal-contentV025",children:[(0,d.jsx)("span",{className:"product-list-closeV025",onClick:()=>y(!1),children:"\xd7"}),(0,d.jsx)(s,{onProductUpdated:T,currentProduct:N})]})})]}),(0,d.jsx)("div",{className:"product-card-containerV025",children:z.map((e=>(0,d.jsxs)("div",{className:"cardV025",onClick:t=>(e=>{P(e)})(e),children:[(0,d.jsx)("div",{className:"image_containerV025",children:(0,d.jsx)("img",{src:e.productImage,alt:e.productCategory,className:"imageV025",loading:"lazy"})}),(0,d.jsx)("h2",{className:"titleV025",children:e.productCategory}),(0,d.jsxs)("p",{className:"typeV025",children:["Type: ",e.productType]}),(0,d.jsxs)("p",{className:"VolumeV025",children:["Volume: ",e.productVolume]}),(0,d.jsxs)("p",{className:"Final_priceV025",children:["Price: \u20b9",new Intl.NumberFormat("en-IN").format(e.productPrice)]}),(0,d.jsx)("button",{className:"edit-buttonV025",onClick:t=>((e,t)=>{t.stopPropagation(),V(e),g&&x(!1),y(!0)})(e,t),children:"Update"})]},e.productid)))}),C&&(0,d.jsx)("div",{className:"product-modalV025",style:{top:b.top,left:b.left},children:(0,d.jsxs)("div",{className:"product-modal-contentV025 small-modalV025",children:[(0,d.jsx)("span",{className:"product-modal-closeV025",onClick:E,children:"\xd7"}),(0,d.jsx)("h2",{children:C.productCategory}),(0,d.jsx)("img",{src:C.productImage,alt:C.productCategory,loading:"lazy"}),(0,d.jsx)("p",{children:C.productDescription}),(0,d.jsxs)("p",{children:["Volume: ",C.productVolume]}),(0,d.jsxs)("p",{children:["Price: \u20b9",new Intl.NumberFormat("en-IN").format(C.productPrice)]})]})})]})}},4594:(e,t,r)=>{r.d(t,{A:()=>a});r(5043);var o=r(579);const a=()=>(0,o.jsx)("div",{className:"dot-spinner-container",children:(0,o.jsx)("div",{className:"dot-spinner",children:Array.from({length:8},((e,t)=>(0,o.jsx)("div",{className:`dot-spinner__dot dot-spinner__dot--${t+1}`},t)))})})}}]);
//# sourceMappingURL=526.3cec5c8c.chunk.js.map